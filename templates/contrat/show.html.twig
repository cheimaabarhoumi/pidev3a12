{% extends 'base.html.twig' %}

{% block title %}Contrat - {{ contrat.reference }}{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h3>ğŸ“œ DÃ©tails du Contrat</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- PremiÃ¨re colonne -->
                <div class="col-md-6">
                    <p><strong>ğŸ“Œ RÃ©fÃ©rence :</strong> {{ contrat.reference }}</p>
                    <p><strong>ğŸ“„ IntitulÃ© :</strong> {{ contrat.intitule }}</p>
                    <p><strong>ğŸ“… Date DÃ©but :</strong> {{ contrat.dateDebut ? contrat.dateDebut|date('d/m/Y') : '-' }}</p>
                    <p><strong>ğŸ“… Date Fin :</strong> {{ contrat.dateFin ? contrat.dateFin|date('d/m/Y') : '-' }}</p>
                    <p><strong>ğŸ’° Montant :</strong> {{ contrat.montant|number_format(2, ',', ' ') }} â‚¬</p>
                    <p><strong>ğŸ”„ FrÃ©quence Paiement :</strong> {{ contrat.frequencePaiement }}</p>
                </div>

                <!-- DeuxiÃ¨me colonne -->
                <div class="col-md-6">
                    <p><strong>ğŸ’³ Mode Paiement :</strong> {{ contrat.modePaiement }}</p>
                    <p><strong>ğŸ“ Statut :</strong> 
                        <span class="badge {% if contrat.statut == 'Actif' %}badge-success{% elseif contrat.statut == 'En attente' %}badge-warning{% else %}badge-danger{% endif %}">
                            {{ contrat.statut }}
                        </span>
                    </p>
                    <p><strong>ğŸ–Šï¸ Signature :</strong> {{ contrat.dateSignature ? contrat.dateSignature|date('d/m/Y') : '-' }}</p>
                    <p><strong>ğŸ”„ Renouvellement :</strong> {{ contrat.renouvellementAutomatique ? 'âœ”ï¸ Oui' : 'âŒ Non' }}</p>
                    <p><strong>ğŸ“† RÃ©vision :</strong> {{ contrat.dateProchaineRevision ? contrat.dateProchaineRevision|date('d/m/Y') : '-' }}</p>
                    <p><strong>ğŸ•’ CrÃ©Ã© le :</strong> {{ contrat.createdAt ? contrat.createdAt|date('d/m/Y H:i') : '-' }}</p>
                </div>
            </div>

            <!-- Fichier et clauses -->
            <div class="mt-3">
                <p><strong>ğŸ“‚ Fichier :</strong> 
                    {% if contrat.fichierContrat %}
                        <a href="{{ asset('uploads/' ~ contrat.fichierContrat) }}" class="btn btn-sm btn-info" target="_blank">ğŸ“¥ TÃ©lÃ©charger</a>
                    {% else %}
                        Aucun fichier attachÃ©
                    {% endif %}
                </p>
                <p>
                    <strong>ğŸ“œ Clauses :</strong>
                    <a href="{{ path('app_clause_contrat_index', {'contratId': contrat.idContrat}) }}" class="btn btn-sm btn-primary">
                        ğŸ“‹ GÃ©rer les clauses
                    </a>
                </p>
            </div>

            <!-- Actions -->
            <div class="mt-4 text-center">
                <a href="{{ path('admin_contrat_pdf', {'id': contrat.idContrat}) }}" class="btn btn-info" title="GÃ©nÃ©rer PDF">
                    <i class="fas fa-file-pdf"></i> TÃ©lÃ©charger le PDF
                </a>
                <a href="{{ path('app_contrat_edit', {'idContrat': contrat.idContrat}) }}" class="btn btn-warning">
                    âœï¸ Modifier
                </a>
                <a href="{{ path('app_contrat_index') }}" class="btn btn-secondary">ğŸ”™ Retour</a>
                {{ include('contrat/_delete_form.html.twig', {'contrat': contrat}) }}
            </div>
        </div>
    </div>
</div>
{% endblock %}
